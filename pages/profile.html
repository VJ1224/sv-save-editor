<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Stardew Valley Save Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.0-beta2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="/static/css/styles.min.css">
</head>

<body>
    <section class="login-clean">
        <h1 style="margin-right: 20.8px;margin-left: 20.8px;">Stardew Valley Save Editor</h1>
        <div class="container" style="margin-left: 20.8px;">
            <div class="row">
                <div class="col-md-6">
                    <p>
                        Name: {{name}} <br>
                        Sex: {{sex}} <br> <br>
                        Date: {{date}} <br>
                        Playtime: {{playtime}} <br> <br>
                        Current Money: {{currentMoney}} <br>
                        Money Earned: {{moneyEarned}} <br> <br>

                        {{#skills}}
                        Skills: <br>
                        <ul>
                        <li>Farming: {{farmingLevel}}</li>
                        <li>Mining: {{miningLevel}}</li>
                        <li>Combat: {{combatLevel}}</li>
                        <li>Foraging: {{foragingLevel}}</li>
                        <li>Fishing: {{fishingLevel}}</li>
                        </ul>
                        {{/skills}}
                    </p>
                </div>
                <div class="col-md-6">
                    <form method="post" onsubmit="sendData(event)">
                        <div class="form-group"><label>Edit Name:</label><input class="form-control" type="text" id="sv-name"></div>
                        <div class="form-group"><label>Edit Money:</label><input class="form-control" type="number" id="sv-money"></div>
                        <button class="btn btn-primary d-block w-100" type="submit" style="color: var(--bs-light);background: var(--bs-red);">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </section>    

    <script>
        function sendData(event) {
            event.preventDefault();
            let data = {};
            let name = document.getElementById("sv-name").value;
            let money = document.getElementById("sv-money").value;

            if (name.length !== 0 || name.trim()) {
                data["name"] = name;
            }

            if (money.length !== 0 || money.trim()) {
                data["money"] = money;
            }

            fetch("/edit", {
                method: "POST",
                headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(response => {
                console.log(response);
                window.location.href = '/profile';
            });
        }
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.0-beta2/js/bootstrap.bundle.min.js"></script>
</body>

</html>