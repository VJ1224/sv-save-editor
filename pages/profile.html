<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Stardew Valley Save Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.0-beta2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="/static/css/styles.min.css">
</head>

<body>
    <section class="login-clean" style="padding-top: 20.8px;">
        <h1 style="margin-right: 20.8px;margin-left: 20.8px;">Stardew Valley Save Editor</h1>
        <div class="container" style="margin-left: 20.8px;">
            <div class="row">
                <div class="col">
                    <p>
                        Name: {{name}} <br>
                        Farm Name: {{farmName}} <br>
                        Favourite Thing: {{favoriteThing}} <br>
                        Sex: {{sex}} <br> 
                        Animal: {{animal}} <br> <br>
                        
                        Date: {{date}} <br>
                        Playtime: {{playtime}} <br> <br>

                        Current Money: {{currentMoney}} <br>
                        Money Earned: {{moneyEarned}} <br> <br>

                        Max Health: {{maxHealth}} <br>
                        Max Stamina: {{maxStamina}} <br> <br>

                        {{#skills}}
                        Skills: <br>
                        <ul>
                        <li>Farming: {{farmingLevel}} | Exp: {{farmingExp}}</li>
                        <li>Mining: {{miningLevel}} | Exp: {{miningExp}}</li>
                        <li>Combat: {{combatLevel}} | Exp: {{combatExp}}</li>
                        <li>Foraging: {{foragingLevel}} | Exp: {{foragingExp}}</li>
                        <li>Fishing: {{fishingLevel}} | Exp: {{fishingExp}}</li>
                        </ul>
                        {{/skills}}
                    </p>
                </div>
                <div class="col">
                    <form method="post" onsubmit="sendData(event)">
                        <div class="row">
                            <div class="form-group col">
                                <label>Edit Name:</label>
                                <input class="form-control" type="text" id="sv-name">
                            </div>

                            <div class="form-group col">
                                <label>Edit Farm Name:</label>
                                <input class="form-control" type="text" id="sv-farm-name">
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group col">
                                <label>Edit Favourite Thing:</label>
                                <input class="form-control" type="text" id="sv-favorite-thing">
                            </div>
    
                            <div class="form-group col">
                                <label>Edit Money:</label>
                                <input class="form-control" type="number" id="sv-money">
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group col">
                                <label>Edit Health:</label>
                                <input class="form-control" type="number" id="sv-health">
                            </div>
    
                            <div class="form-group col">
                                <label>Edit Stamina:</label>
                                <input class="form-control" type="number" id="sv-stamina">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="form-group col">
                                <label>Edit Sex:</label>
                                <div class="form-check"><input type="radio" class="form-check-input" id="sv-sex1" name="sv-sex" value="male"/><label class="form-check-label" for="sv-sex1">Male</label></div>
                                <div class="form-check"><input type="radio" class="form-check-input" id="sv-sex2" name="sv-sex" value="female"/><label class="form-check-label" for="sv-sex2">Female</label></div>
                            </div>
    
                            <div class="form-group col">
                                <label>Edit Animal:</label>
                                <div class="form-check"><input type="radio" class="form-check-input" id="sv-animal1" name="sv-animal" value="cat"/><label class="form-check-label" for="sv-animal1">Cat</label></div>
                                <div class="form-check"><input type="radio" class="form-check-input" id="sv-animal2" name="sv-animal" value="dog"/><label class="form-check-label" for="sv-animal2">Dog</label></div>
                            </div>
                        </div>

                        <button class="btn btn-primary d-block w-100" type="submit" style="color: var(--bs-light);background: var(--bs-red);">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </section>    

    <script>
        function sendData(event) {
            event.preventDefault();
            let data = {};
            let name = document.getElementById("sv-name").value;
            let money = document.getElementById("sv-money").value;

            let farmName = document.getElementById("sv-farm-name").value;
            let favoriteThing = document.getElementById("sv-favorite-thing").value;

            let health = document.getElementById("sv-health").value;
            let stamina = document.getElementById("sv-stamina").value;

            let male = document.getElementById("sv-sex1").checked;
            let female = document.getElementById("sv-sex2").checked;

            let cat = document.getElementById("sv-animal1").checked;
            let dog = document.getElementById("sv-animal2").checked;

            if (name.length !== 0 || name.trim()) {
                data["name"] = name;
            }

            if (money.length !== 0 || money.trim()) {
                data["money"] = money;
            }

            if (health.length !== 0 || health.trim()) {
                data["health"] = health;
            }

            if (stamina.length !== 0 || stamina.trim()) {
                data["stamina"] = stamina;
            }

            if (farmName.length !== 0 || farmName.trim()) {
                data["farmName"] = farmName;
            }

            if (favoriteThing.length !== 0 || favoriteThing.trim()) {
                data["favoriteThing"] = favoriteThing;
            }

            if (male) {
                data["sex"] = "true";
            }

            if (female) {
                data["sex"] = "false";
            }

            if (cat) {
                data["animal"] = "true";
            }

            if (dog) {
                data["animal"] = "false";
            }

            fetch("/edit", {
                method: "POST",
                headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(response => {
                console.log(response);
                window.location.href = '/profile';
            });
        }
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.0-beta2/js/bootstrap.bundle.min.js"></script>
</body>

</html>